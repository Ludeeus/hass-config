############################################################################
## Packages / Version Control
##
## @description Send a notification when there is a new version of HA.
## @component   automation, notify, sensor
## @license     MIT
## @author      @ludeeus
############################################################################
# This package uses resources from other packages:
# Notifications: https://github.com/ludeeus/Home-Assistant-Config/blob/master/packages/notify_template.yaml

automation:
  - alias: "Home Assistant updata notification"
    trigger:
      - platform: state
        entity_id: sensor.github_ha_version
    action:
      - service: script.notify
        data_template:
          message: "Home Assistant  {{ states.sensor.github_ha_version.state }}  is now available."
sensor:
  - platform: command_line
    name: 'GitHub HA Version'
    command: curl -s https://github.com/home-assistant/home-assistant/releases/latest | awk -F'/' '{print $8}' | awk -F'"' '{print $1 }'